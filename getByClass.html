<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<script>
	window.onload = function(){
		var oUl = document.getElementById('ul1');
		function findInArr(arr,str){
			for(var i = 0;i<arr.length;i++){
				if(arr[i] == str){
					return true;
				}
			}
			return false;
		}
		
/*		function getByClass(oParent,sClass){
			if(oParent.getElementsByClassName){
				return oParent.getElementsByClassName(sClass);
			}else{
				var res =[];
				//1.先获取父级下面的所有元素
				var aAll = oParent.getElementsByClassName('*');
				for(var i = 0;i<aAll.length;i++){
					//2.将 类名中含所有 sCalss的元素 存入数组
					//[on on2]放的是每一个元素的类名组成的数组
					var arr = aAll[i].className.split(' ');
					//当前这个元素的类名切割成的数组里面有没有sClass
					if(findInArr(arr,sClass)){
						res.push(aAll[i]);
					}
				}
				return res;
			}
		}
*/		
		var getByClass = function(oParent,sClass){
			if(oParent.getElementsByClassName){
				 return oParent.getElementsByClassName(sClass);
			}else{
				var res = [];
				var aAll = oParent.getElementsByClassName('*');
				for(var i=0;i<aAll.length;i++){
					var arr = aAll[i].className.split(' ');
					if(findInArr(arr,sClass)){
						res.push(arr[i]);
					}
				}
				return res;
			}
		};
		
		
		
		
		var ares = getByClass(oUl,'on');
		for(var i= 0;i<ares.length;i++){
			ares[i].style.background = 'red';
		}
	};
</script>
</head>

<body>
	<ul id="ul1">
    	<li>111111</li>
    	<li class="on on2">22222</li>
    	<li>333</li>
    	<li class="on">444</li>
    	<li class="on2">555</li>
        <span class="on">我还是那个帅气的span</span>
    </ul>
</body>
</html>
